<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Car Game</title>
  <link rel="stylesheet" href="style.css">
</head>

<body>

  <div class="pai_jogo">
    <div class="boneco">

    </div>
    <div class="carro1">
      1
    </div>
    <div class="carro2">
      2
    </div>
    <div class="carro3">
      3
    </div>
    <div class="carro4">
      4
    </div>
    <div class="carro5">
      5
    </div>
    <div class="carro6">
      6
    </div>
    <div class="faixa1">

    </div>
    <div class="faixa2">

    </div>
  </div>

  <div class="pai_button">
    <button class="esquerda">
      Esquerda
    </button>
    <button class="direita">
      Direita
    </button>
  </div>

  <script>
    var boneco = document.querySelector("div.boneco")
    var esquerda = document.querySelector("button.esquerda")
    var direita = document.querySelector("button.direita")
    var carro1 = document.querySelector("div.carro1")
    var carro2 = document.querySelector("div.carro2")
    var carro3 = document.querySelector("div.carro3")
    var carro4 = document.querySelector("div.carro4")
    var carro5 = document.querySelector("div.carro5")
    var carro6 = document.querySelector("div.carro6")


    var xBoneco = 168
    var y1 = -50
    var y2 = -50
    var y3 = -50
    var y4 = -50
    var y5 = -50
    var y6 = -50
    var meio = 400
    var yFinal = 507
    var validador1 = 1
    var validador2 = 0
    var validador3 = 0
    var validador4 = 0
    var validador5 = 0
    var validador6 = 0
    var EndValidador = 0
    var anima

    boneco.style.left = xBoneco + "px"
    boneco.style.top = "453px"

    carro1.style.left = "38px"
    carro1.style.top = y1 + "px"

    carro2.style.left = "168px"
    carro2.style.top = y2 + "px"

    carro3.style.left = "298px"
    carro3.style.top = y3 + "px"

    carro4.style.left = "38px"
    carro4.style.top = y4 + "px"

    carro5.style.left = "168px"
    carro5.style.top = y5 + "px"

    carro6.style.left = "298px"
    carro6.style.top = y6 + "px"

    function game() {

      boneco.style.left = xBoneco + "px"

      if(EndValidador = 1) {
        carro1.style.top = y1 + "px"
        carro2.style.top = y2 + "px"
        carro3.style.top = y3 + "px"
        carro4.style.top = y4 + "px"
        carro5.style.top = y5 + "px"
        carro6.style.top = y6 + "px"
        EndValidador = 0
      }

      /* validador1, jÃ¡ inicia com valor
        1*/

      if (y1 >= 100) {
        validador3 = 1
      }

      if (y1 >= 260) {
        validador2 = 1
      }

      val()

      mid()

      yEnd()

      colisao()

    }

    function end() {

      cancelAnimationFrame(anima)

      y1 = -50
      y2 = -50
      y3 = -50
      y4 = -50
      y5 = -50
      y6 = -50

      xBoneco = 168

      validador1 = 1
      validador2 = 0
      validador3 = 0
      validador4 = 0
      validador5 = 0
      validador6 = 0

      EndValidador = 1
      
    }

    function esq() {

      if(EndValidador == 0) {
        xBoneco -= 130
        if (xBoneco < 0) {
          xBoneco = 38
        }
        boneco.style.left = xBoneco + "px"
      }
      
    }

    function dire() {

      if(EndValidador == 0) {
        xBoneco += 130
        if (xBoneco > 300) {
          xBoneco = 298
        }
        boneco.style.left = xBoneco + "px"
      }

    }

    function val() {

      if (validador1 == 1) {
        carro1.style.top = y1 + "px"
        y1 += 1
      }

      if (validador2 == 1) {
        carro2.style.top = y2 + "px"
        y2 += 1
      }

      if (validador3 == 1) {
        carro3.style.top = y3 + "px"
        y3 += 1
      }

      if (validador4 == 1) {
        carro4.style.top = y4 + "px"
        y4 += 1
      }

      if (validador5 == 1) {
        carro5.style.top = y5 + "px"
        y5 += 1
      }

      if (validador6 == 1) {
        carro6.style.top = y6 + "px"
        y6 += 1
      }
    }

    function mid() {

      if (y1 == meio) {
        validador4 = 1
      }

      if (y2 == meio) {
        validador5 = 1
      }

      if (y3 == meio) {
        validador6 = 1
      }

      if (y4 == meio) {
        validador1 = 1
      }

      if (y5 == meio) {
        validador2 = 1
      }

      if (y6 == meio) {
        validador3 = 1
      }
    }

    function yEnd() {

      if (y1 == yFinal) {
        y1 = -50
        validador1 = 0
      }

      if (y2 == yFinal) {
        y2 = -50
        validador2 = 0
      }

      if (y3 == yFinal) {
        y3 = -50
        validador3 = 0
      }

      if (y4 == yFinal) {
        y4 = -50
        validador4 = 0
      }

      if (y5 == yFinal) {
        y5 = -50
        validador5 = 0
      }

      if (y6 == yFinal) {
        y6 = -50
        validador6 = 0
      }

    }
    function colisao() {

      if (y1 >= 403 && y1 <= 503 && xBoneco == 38 || y2 >= 403 && y2 <= 503 && xBoneco == 168 || y3 >= 403 && y3 <= 503 && xBoneco == 298 || y4 >= 403 && y4 <= 503 && xBoneco == 38 || y5 >= 403 && y5 <= 503 && xBoneco == 168 || y6 >= 403 && y6 <= 503 && xBoneco == 298) {
        end()
        
        
      }
      else {
        anima = requestAnimationFrame(game)
      }

    }

    esquerda.addEventListener("click", esq)
    direita.addEventListener("click", dire)
    boneco.addEventListener("click", game)

  </script>
</body>

</html>
